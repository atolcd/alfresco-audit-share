!function(a){"use strict";function f(a){this.owner=a}function g(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function h(a){var b=this.internal=new i(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function a(b,c,d){Object.keys(b).forEach(function(e){c[e]=b[e].bind(d),Object.keys(b[e]).length>0&&a(b[e],c[e],d)})}(c,this,this)}function i(b){var c=this;c.d3=a.d3?a.d3:"undefined"!=typeof require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function j(a){f.call(this,a)}function A(a,b){function n(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+k)+", 0)"})}function o(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function p(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function q(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,j);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function r(){var d,a=c.copy();return b.isCategory&&(d=c.domain(),a.domain([d[0],d[1]-1])),a}function s(a){var b=i?i(a):a;return"undefined"!=typeof b?b:""}function t(a){if(z)return z;var b={h:11.5,w:5.5};return a.select("text").text(s).each(function(a){var c=this.getBoundingClientRect(),d=s(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),z=b,b}function u(c){return b.withoutTransition?c:a.transition(c)}function v(i){i.each(function(){function R(a,c){function i(a,b){f=void 0;for(var d=1;d<b.length;d++)if(" "===b.charAt(d)&&(f=d),e=b.substr(0,d+1),g=N.w*e.length,c<g)return i(a.concat(b.substr(0,f?f:d)),b.slice(f?f+1:d));return a.concat(b)}var e,f,g,d=s(a),h=[];return"[object Array]"===Object.prototype.toString.call(d)?d:((!c||c<=0)&&(c=Q?95:b.isCategory?Math.ceil(l(w[1])-l(w[0]))-12:110),i(h,d+""))}function S(a,b){var c=N.h;return 0===b&&(c="left"===d||"right"===d?-((O[a.index]-1)*(N.h/2)-3):".71em"),c}function T(a){var b=c(a)+(m?0:k);return E[0]<b&&b<E[1]?e:0}function V(a){return a?a>0?"start":"end":"middle"}function W(a){return a?"rotate("+a+")":""}function X(a){return a?8*Math.sin(Math.PI*(a/180)):0}function Y(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):P}var B,C,D,i=v.g=a.select(this),j=this.__chart__||c,l=this.__chart__=r(),w=h?h:q(l),x=i.selectAll(".tick").data(w,l),y=x.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),z=x.exit().remove(),A=u(x).style("opacity",1),E=c.rangeExtent?c.rangeExtent():p(c.range()),F=i.selectAll(".domain").data([0]),G=(F.enter().append("path").attr("class","domain"),u(F));y.append("line"),y.append("text");var H=y.select("line"),I=A.select("line"),J=y.select("text"),K=A.select("text");b.isCategory?(k=Math.ceil((l(1)-l(0))/2),C=m?0:k,D=m?k:0):k=C=0;var L,M,N=t(i.select(".tick")),O=[],P=Math.max(e,0)+g,Q="left"===d||"right"===d;L=x.select("text"),M=L.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?R(a,b.tickWidth):[].concat(s(a));return O[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),M.enter().append("tspan"),M.exit().remove(),M.text(function(a){return a.splitted});var U=b.tickTextRotate;switch(d){case"bottom":B=n,H.attr("y2",e),J.attr("y",P),I.attr("x1",C).attr("x2",C).attr("y2",T),K.attr("x",0).attr("y",Y(U)).style("text-anchor",V(U)).attr("transform",W(U)),M.attr("x",0).attr("dy",S).attr("dx",X(U)),G.attr("d","M"+E[0]+","+f+"V0H"+E[1]+"V"+f);break;case"top":B=n,H.attr("y2",-e),J.attr("y",-P),I.attr("x2",0).attr("y2",-e),K.attr("x",0).attr("y",-P),L.style("text-anchor","middle"),M.attr("x",0).attr("dy","0em"),G.attr("d","M"+E[0]+","+-f+"V0H"+E[1]+"V"+-f);break;case"left":B=o,H.attr("x2",-e),J.attr("x",-P),I.attr("x2",-e).attr("y1",D).attr("y2",D),K.attr("x",-P).attr("y",k),L.style("text-anchor","end"),M.attr("x",-P).attr("dy",S),G.attr("d","M"+-f+","+E[0]+"H0V"+E[1]+"H"+-f);break;case"right":B=o,H.attr("x2",e),J.attr("x",P),I.attr("x2",e).attr("y2",0),K.attr("x",P).attr("y",0),L.style("text-anchor","start"),M.attr("x",P).attr("dy",S),G.attr("d","M"+f+","+E[0]+"H0V"+E[1]+"H"+f)}if(l.rangeBand){var Z=l,$=Z.rangeBand()/2;j=l=function(a){return Z(a)+$}}else j.rangeBand?j=l:z.call(B,l);y.call(B,j),A.call(B,l)})}var f,i,j,m,c=a.scale.linear(),d="bottom",e=6,g=3,h=null,k=0,l=!0;return b=b||{},f=b.withOuterTick?6:0,v.scale=function(a){return arguments.length?(c=a,v):c},v.orient=function(a){return arguments.length?(d=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",v):d},v.tickFormat=function(a){return arguments.length?(i=a,v):i},v.tickCentered=function(a){return arguments.length?(m=a,v):m},v.tickOffset=function(){return k},v.tickInterval=function(){var a,c;return b.isCategory?a=2*k:(c=v.g.select("path.domain").node().getTotalLength()-2*f,a=c/v.g.selectAll("line").size()),a===1/0?0:a},v.ticks=function(){return arguments.length?(j=arguments,v):j},v.tickCulling=function(a){return arguments.length?(l=a,v):l},v.tickValues=function(a){if("function"==typeof a)h=function(){return a(c.domain())};else{if(!arguments.length)return h;h=a}return v},v}var c,d,e,b={version:"0.4.11"};b.generate=function(a){return new h(a)},b.chart={fn:h.prototype,internal:{fn:i.prototype,axis:{fn:j.prototype}}},c=b.chart.fn,d=b.chart.internal.fn,e=b.chart.internal.axis.fn,d.beforeInit=function(){},d.afterInit=function(){},d.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_headers,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},d.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},d.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},d.initWithData=function(a){var e,f,b=this,c=b.d3,d=b.config,g=!0;b.axis=new j(b),b.initPie&&b.initPie(),b.initBrush&&b.initBrush(),b.initZoom&&b.initZoom(),d.bindto?"function"==typeof d.bindto.node?b.selectChart=d.bindto:b.selectChart=c.select(d.bindto):b.selectChart=c.selectAll([]),b.selectChart.empty()&&(b.selectChart=c.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),g=!1),b.selectChart.html("").classed("c3",!0),b.data.xs={},b.data.targets=b.convertDataToTargets(a),d.data_filter&&(b.data.targets=b.data.targets.filter(d.data_filter)),d.data_hide&&b.addHiddenTargetIds(d.data_hide===!0?b.mapToIds(b.data.targets):d.data_hide),d.legend_hide&&b.addHiddenLegendIds(d.legend_hide===!0?b.mapToIds(b.data.targets):d.legend_hide),b.hasType("gauge")&&(d.legend_show=!1),b.updateSizes(),b.updateScales(),b.x.domain(c.extent(b.getXDomain(b.data.targets))),b.y.domain(b.getYDomain(b.data.targets,"y")),b.y2.domain(b.getYDomain(b.data.targets,"y2")),b.subX.domain(b.x.domain()),b.subY.domain(b.y.domain()),b.subY2.domain(b.y2.domain()),b.orgXDomain=b.x.domain(),b.brush&&b.brush.scale(b.subX),d.zoom_enabled&&b.zoom.scale(b.x),b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return d.onmouseover.call(b)}).on("mouseleave",function(){return d.onmouseout.call(b)}),b.config.svg_classname&&b.svg.attr("class",b.config.svg_classname),e=b.svg.append("defs"),b.clipChart=b.appendClip(e,b.clipId),b.clipXAxis=b.appendClip(e,b.clipIdForXAxis),b.clipYAxis=b.appendClip(e,b.clipIdForYAxis),b.clipGrid=b.appendClip(e,b.clipIdForGrid),b.clipSubchart=b.appendClip(e,b.clipIdForSubchart),b.updateSvgSize(),f=b.main=b.svg.append("g").attr("transform",b.getTranslate("main")),b.initSubchart&&b.initSubchart(),b.initTooltip&&b.initTooltip(),b.initLegend&&b.initLegend(),b.initTitle&&b.initTitle(),f.append("text").attr("class",k.text+" "+k.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),b.initRegion(),b.initGrid(),f.append("g").attr("clip-path",b.clipPath).attr("class",k.chart),d.grid_lines_front&&b.initGridLines(),b.initEventRect(),b.initChartElements(),f.insert("rect",d.zoom_privileged?null:"g."+k.regions).attr("class",k.zoomRect).attr("width",b.width).attr("height",b.height).style("opacity",0).on("dblclick.zoom",null),d.axis_x_extent&&b.brush.extent(b.getDefaultExtent()),b.axis.init(),b.updateTargets(b.data.targets),g&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),b.bindResize(),b.api.element=b.selectChart.node()},d.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},d.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&!b.gauge_fullCircle&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},d.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},d.showTargets=function(){var a=this;a.svg.selectAll("."+k.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},d.redraw=function(a,b){var j,l,m,n,o,p,q,r,s,t,u,w,x,z,A,B,C,D,E,F,G,H,I,K,L,M,N,P,Q,c=this,d=c.main,e=c.d3,f=c.config,g=c.getShapeIndices(c.isAreaType),h=c.getShapeIndices(c.isBarType),i=c.getShapeIndices(c.isLineType),y=c.hasArcType(),J=c.filterTargetsToShow(c.data.targets),O=c.xv.bind(c);if(a=a||{},j=v(a,"withY",!0),l=v(a,"withSubchart",!0),m=v(a,"withTransition",!0),p=v(a,"withTransform",!1),q=v(a,"withUpdateXDomain",!1),r=v(a,"withUpdateOrgXDomain",!1),s=v(a,"withTrimXDomain",!0),x=v(a,"withUpdateXAxis",q),t=v(a,"withLegend",!1),u=v(a,"withEventRect",!0),w=v(a,"withDimension",!0),n=v(a,"withTransitionForExit",m),o=v(a,"withTransitionForAxis",m),E=m?f.transition_duration:0,F=n?E:0,G=o?E:0,b=b||c.axis.generateTransitions(G),t&&f.legend_show?c.updateLegend(c.mapToIds(c.data.targets),a,b):w&&c.updateDimension(!0),c.isCategorized()&&0===J.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]),J.length?(c.updateXDomain(J,q,r,s),f.axis_x_tick_values||(K=c.axis.updateXAxisTickValues(J))):(c.xAxis.tickValues([]),c.subXAxis.tickValues([])),f.zoom_rescale&&!a.flow&&(N=c.x.orgDomain()),c.y.domain(c.getYDomain(J,"y",N)),c.y2.domain(c.getYDomain(J,"y2",N)),!f.axis_y_tick_values&&f.axis_y_tick_count&&c.yAxis.tickValues(c.axis.generateTickValues(c.y.domain(),f.axis_y_tick_count)),!f.axis_y2_tick_values&&f.axis_y2_tick_count&&c.y2Axis.tickValues(c.axis.generateTickValues(c.y2.domain(),f.axis_y2_tick_count)),c.axis.redraw(b,y),c.axis.updateLabels(m),(q||x)&&J.length)if(f.axis_x_tick_culling&&K){for(L=1;L<K.length;L++)if(K.length/L<f.axis_x_tick_culling_max){M=L;break}c.svg.selectAll("."+k.axisX+" .tick text").each(function(a){var b=K.indexOf(a);b>=0&&e.select(this).style("display",b%M?"none":"block")})}else c.svg.selectAll("."+k.axisX+" .tick text").style("display","block");z=c.generateDrawArea?c.generateDrawArea(g,!1):void 0,A=c.generateDrawBar?c.generateDrawBar(h):void 0,B=c.generateDrawLine?c.generateDrawLine(i,!1):void 0,C=c.generateXYForText(g,h,i,!0),D=c.generateXYForText(g,h,i,!1),j&&(c.subY.domain(c.getYDomain(J,"y")),c.subY2.domain(c.getYDomain(J,"y2"))),c.updateXgridFocus(),d.select("text."+k.text+"."+k.empty).attr("x",c.width/2).attr("y",c.height/2).text(f.data_empty_label_text).transition().style("opacity",J.length?0:1),c.updateGrid(E),c.updateRegion(E),c.updateBar(F),c.updateLine(F),c.updateArea(F),c.updateCircle(),c.hasDataLabel()&&c.updateText(F),c.redrawTitle&&c.redrawTitle(),c.redrawArc&&c.redrawArc(E,F,p),c.redrawSubchart&&c.redrawSubchart(l,b,E,F,g,h,i),d.selectAll("."+k.selectedCircles).filter(c.isBarType.bind(c)).selectAll("circle").remove(),f.interaction_enabled&&!a.flow&&u&&(c.redrawEventRect(),c.updateZoom&&c.updateZoom()),c.updateCircleY(),P=(c.config.axis_rotated?c.circleY:c.circleX).bind(c),Q=(c.config.axis_rotated?c.circleX:c.circleY).bind(c),a.flow&&(I=c.generateFlow({targets:J,flow:a.flow,duration:a.flow.duration,drawBar:A,drawLine:B,drawArea:z,cx:P,cy:Q,xv:O,xForText:C,yForText:D})),(E||I)&&c.isTabVisible()?e.transition().duration(E).each(function(){var b=[];[c.redrawBar(A,!0),c.redrawLine(B,!0),c.redrawArea(z,!0),c.redrawCircle(P,Q,!0),c.redrawText(C,D,a.flow,!0),c.redrawRegion(!0),c.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),H=c.generateWait(),b.forEach(function(a){H.add(a)})}).call(H,function(){I&&I(),f.onrendered&&f.onrendered.call(c)}):(c.redrawBar(A),c.redrawLine(B),c.redrawArea(z),c.redrawCircle(P,Q),c.redrawText(C,D,a.flow),c.redrawRegion(),c.redrawGrid(),f.onrendered&&f.onrendered.call(c)),c.mapToIds(c.data.targets).forEach(function(a){c.withoutFadeIn[a]=!0})},d.updateAndRedraw=function(a){var d,b=this,c=b.config;a=a||{},a.withTransition=v(a,"withTransition",!0),a.withTransform=v(a,"withTransform",!1),a.withLegend=v(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=v(a,"withTransitionForTransform",a.withTransition),b.updateSizes(),a.withLegend&&c.legend_show||(d=b.axis.generateTransitions(a.withTransitionForAxis?c.transition_duration:0),b.updateScales(),b.updateSvgSize(),b.transformAll(a.withTransitionForTransform,d)),b.redraw(a,d)},d.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},d.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},d.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},d.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||u(b.data_xs))},d.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},d.getTranslate=function(a){var d,e,b=this,c=b.config;return"main"===a?(d=r(b.margin.left),e=r(b.margin.top)):"context"===a?(d=r(b.margin2.left),e=r(b.margin2.top)):"legend"===a?(d=b.margin3.left,e=b.margin3.top):"x"===a?(d=0,e=c.axis_rotated?0:b.height):"y"===a?(d=0,e=c.axis_rotated?b.height:0):"y2"===a?(d=c.axis_rotated?0:b.width,e=c.axis_rotated?1:0):"subx"===a?(d=0,e=c.axis_rotated?0:b.height2):"arc"===a&&(d=b.arcWidth/2,e=b.arcHeight/2),"translate("+d+","+e+")"},d.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},d.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},d.opacityForCircle=function(a){var b=this.config.point_show?1:0;return l(a.value)?this.isScatterType(a)?.5:b:0},d.opacityForText=function(){return this.hasDataLabel()?1:0},d.xx=function(a){return a?this.x(a.x):null},d.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},d.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},d.subxx=function(a){return a?this.subX(a.x):null},d.transformMain=function(a,b){var d,e,f,c=this;b&&b.axisX?d=b.axisX:(d=c.main.select("."+k.axisX),a&&(d=d.transition())),b&&b.axisY?e=b.axisY:(e=c.main.select("."+k.axisY),a&&(e=e.transition())),b&&b.axisY2?f=b.axisY2:(f=c.main.select("."+k.axisY2),a&&(f=f.transition())),(a?c.main.transition():c.main).attr("transform",c.getTranslate("main")),d.attr("transform",c.getTranslate("x")),e.attr("transform",c.getTranslate("y")),f.attr("transform",c.getTranslate("y2")),c.main.select("."+k.chartArcs).attr("transform",c.getTranslate("arc"))},d.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},d.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+k.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},d.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},d.observeInserted=function(b){var d,c=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(d=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(d.disconnect(),c.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(c.intervalForObserveInserted),c.updateDimension(),c.brush&&c.brush.update(),c.config.oninit.call(c),c.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void d.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},d.bindResize=function(){var b=this,c=b.config;if(b.resizeFunction=b.generateResize(),b.resizeFunction.add(function(){c.onresize.call(b)}),c.resize_auto&&b.resizeFunction.add(function(){void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),b.resizeTimeout=a.setTimeout(function(){delete b.resizeTimeout,b.api.flush()},100)}),b.resizeFunction.add(function(){c.onresized.call(b)}),a.attachEvent)a.attachEvent("onresize",b.resizeFunction);else if(a.addEventListener)a.addEventListener("resize",b.resizeFunction,!1);else{var d=a.onresize;d?d.add&&d.remove||(d=b.generateResize(),d.add(a.onresize)):d=b.generateResize(),d.add(b.resizeFunction),a.onresize=d}},d.generateResize=function(){function b(){a.forEach(function(a){a()})}var a=[];return b.add=function(b){a.push(b)},b.remove=function(b){for(var c=0;c<a.length;c++)if(a[c]===b){a.splice(c,1);break}},b},d.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},d.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(a){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},d.parseDate=function(b){var d,c=this;return b instanceof Date?d=b:"string"==typeof b?d=c.dataTimeFormat(c.config.data_xFormat).parse(b):"number"!=typeof b||isNaN(b)||(d=new Date(+b)),d&&!isNaN(+d)||a.console.error("Failed to parse x '"+b+"' to Date object"),d},d.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),!document[a]},d.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},d.additionalConfig={},d.loadConfig=function(a){function f(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],f()):a?void 0:c}var c,d,e,b=this.config;Object.keys(b).forEach(function(g){c=a,d=g.split("_"),e=f(),p(e)&&(b[g]=e)})},d.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},d.getX=function(a,b,c,d){var h,e=this,f=e.getScale(a,b,e.isTimeSeries()),g=c?f.domain(c):f;e.isCategorized()?(d=d||function(){return 0},f=function(a,b){var c=g(a)+d(a);return b?c:Math.ceil(c)}):f=function(a,b){var c=g(a);return b?c:Math.ceil(c)};for(h in g)f[h]=g[h];return f.orgDomain=function(){return g.domain()},e.isCategorized()&&(f.domain=function(a){return arguments.length?(g.domain(a),f):(a=this.orgDomain(),[a[0],a[1]+1])}),f},d.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},d.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},d.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},d.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},d.getYDomainMin=function(a){var f,g,h,i,j,k,b=this,c=b.config,d=b.mapToIds(a),e=b.getValuesAsIdKeyed(a);if(c.data_groups.length>0)for(k=b.hasNegativeValueInTargets(a),f=0;f<c.data_groups.length;f++)if(i=c.data_groups[f].filter(function(a){return d.indexOf(a)>=0}),0!==i.length)for(h=i[0],k&&e[h]&&e[h].forEach(function(a,b){e[h][b]=a<0?a:0}),g=1;g<i.length;g++)j=i[g],e[j]&&e[j].forEach(function(a,c){b.axis.getId(j)!==b.axis.getId(h)||!e[h]||k&&+a>0||(e[h][c]+=+a)});return b.d3.min(Object.keys(e).map(function(a){return b.d3.min(e[a])}))},d.getYDomainMax=function(a){var f,g,h,i,j,k,b=this,c=b.config,d=b.mapToIds(a),e=b.getValuesAsIdKeyed(a);if(c.data_groups.length>0)for(k=b.hasPositiveValueInTargets(a),f=0;f<c.data_groups.length;f++)if(i=c.data_groups[f].filter(function(a){return d.indexOf(a)>=0}),0!==i.length)for(h=i[0],k&&e[h]&&e[h].forEach(function(a,b){e[h][b]=a>0?a:0}),g=1;g<i.length;g++)j=i[g],e[j]&&e[j].forEach(function(a,c){b.axis.getId(j)!==b.axis.getId(h)||!e[h]||k&&+a<0||(e[h][c]+=+a)});return b.d3.max(Object.keys(e).map(function(a){return b.d3.max(e[a])}))},d.getYDomain=function(a,b,c){var m,n,o,p,q,t,v,w,x,y,z,d=this,e=d.config,f=a.filter(function(a){return d.axis.getId(a.id)===b}),g=c?d.filterByXDomain(f,c):f,h="y2"===b?e.axis_y2_min:e.axis_y_min,i="y2"===b?e.axis_y2_max:e.axis_y_max,j=d.getYDomainMin(g),k=d.getYDomainMax(g),r="y2"===b?e.axis_y2_center:e.axis_y_center,A=d.hasType("bar",g)&&e.bar_zerobased||d.hasType("area",g)&&e.area_zerobased,B="y2"===b?e.axis_y2_inverted:e.axis_y_inverted,C=d.hasDataLabel()&&e.axis_rotated,D=d.hasDataLabel()&&!e.axis_rotated;return j=l(h)?h:l(i)?j<i?j:i-10:j,k=l(i)?i:l(h)?h<k?k:h+10:k,0===g.length?"y2"===b?d.y2.domain():d.y.domain():(isNaN(j)&&(j=0),isNaN(k)&&(k=j),j===k&&(j<0?k=0:j=0),y=j>=0&&k>=0,z=j<=0&&k<=0,(l(h)&&y||l(i)&&z)&&(A=!1),A&&(y&&(j=0),z&&(k=0)),n=Math.abs(k-j),o=p=q=.1*n,"undefined"!=typeof r&&(t=Math.max(Math.abs(j),Math.abs(k)),k=r+t,j=r-t),C?(v=d.getDataLabelLength(j,k,"width"),w=s(d.y.range()),x=[v[0]/w,v[1]/w],
p+=n*(x[1]/(1-x[0]-x[1])),q+=n*(x[0]/(1-x[0]-x[1]))):D&&(v=d.getDataLabelLength(j,k,"height"),p+=d.axis.convertPixelsToAxisPadding(v[1],n),q+=d.axis.convertPixelsToAxisPadding(v[0],n)),"y"===b&&u(e.axis_y_padding)&&(p=d.axis.getPadding(e.axis_y_padding,"top",p,n),q=d.axis.getPadding(e.axis_y_padding,"bottom",q,n)),"y2"===b&&u(e.axis_y2_padding)&&(p=d.axis.getPadding(e.axis_y2_padding,"top",p,n),q=d.axis.getPadding(e.axis_y2_padding,"bottom",q,n)),A&&(y&&(q=j),z&&(p=-k)),m=[j-q,k+p],B?m.reverse():m)},d.getXDomainMin=function(a){var b=this,c=b.config;return p(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},d.getXDomainMax=function(a){var b=this,c=b.config;return p(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},d.getXDomainPadding=function(a){var e,f,g,h,b=this,c=b.config,d=a[1]-a[0];return b.isCategorized()?f=0:b.hasType("bar")?(e=b.getMaxDataCount(),f=e>1?d/(e-1)/2:.5):f=.01*d,"object"==typeof c.axis_x_padding&&u(c.axis_x_padding)?(g=l(c.axis_x_padding.left)?c.axis_x_padding.left:f,h=l(c.axis_x_padding.right)?c.axis_x_padding.right:f):g=h="number"==typeof c.axis_x_padding?c.axis_x_padding:f,{left:g,right:h}},d.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},d.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},d.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},d.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||u(c.data_xs)&&w(c.data_xs,a)},d.isNotX=function(a){return!this.isX(a)},d.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:u(c.data_xs)?c.data_xs[a]:null},d.getXValuesOfXKey=function(a,b){var d,c=this,e=b&&u(b)?c.mapToIds(b):[];return e.forEach(function(b){c.getXKey(b)===a&&(d=c.data.xs[b])}),d},d.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},d.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&l(c.data.xs[a][b])?c.data.xs[a][b]:b},d.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},d.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},d.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},d.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},d.isMultipleX=function(){return u(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},d.addName=function(a){var c,b=this;return a&&(c=b.config.data_names[a.id],a.name=void 0!==c?c:a.id),a},d.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},d.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},d.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},d.generateTargetX=function(a,b,c){var e,d=this;return e=d.isTimeSeries()?a?d.parseDate(a):d.parseDate(d.getXValue(b,c)):d.isCustomX()&&!d.isCategorized()?l(a)?+a:d.getXValue(b,c):c},d.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},d.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},d.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},d.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},d.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},d.getMaxDataCountTarget=function(a){var d,b=a.length,c=0;return b>1?a.forEach(function(a){a.values.length>c&&(d=a,c=a.values.length)}):d=b?a[0]:null,d},d.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},d.mapToIds=function(a){return a.map(function(a){return a.id})},d.mapToTargetIds=function(a){var b=this;return a?[].concat(a):b.mapToIds(b.data.targets)},d.hasTarget=function(a,b){var d,c=this.mapToIds(a);for(d=0;d<c.length;d++)if(c[d]===b)return!0;return!1},d.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},d.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},d.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},d.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a}),c.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})},d.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},d.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},d.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},d.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},d.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},d.checkValueInTargets=function(a,b){var d,e,f,c=Object.keys(a);for(d=0;d<c.length;d++)for(f=a[c[d]].values,e=0;e<f.length;e++)if(b(f[e].value))return!0;return!1},d.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a<0})},d.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},d.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},d.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},d.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):m(c.data_order)&&a.sort(c.data_order),a},d.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},d.filterRemoveNull=function(a){return a.filter(function(a){return l(a.value)})},d.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},d.hasDataLabel=function(){var a=this.config;return!("boolean"!=typeof a.data_labels||!a.data_labels)||!("object"!=typeof a.data_labels||!u(a.data_labels))},d.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},d.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},d.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},d.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},d.findClosestFromTargets=function(a,b){var d,c=this;return d=a.map(function(a){return c.findClosest(a.values,b)}),c.findClosest(d,b)},d.findClosest=function(a,b){var e,c=this,d=c.config.point_sensitivity;return a.filter(function(a){return a&&c.isBarType(a.id)}).forEach(function(a){var b=c.main.select("."+k.bars+c.getTargetSelectorSuffix(a.id)+" ."+k.bar+"-"+a.index).node();!e&&c.isWithinBar(b)&&(e=a)}),a.filter(function(a){return a&&!c.isBarType(a.id)}).forEach(function(a){var f=c.dist(a,b);f<d&&(d=f,e=a)}),e},d.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},d.convertValuesToStep=function(a){var c,b=[].concat(a);if(!this.isCategorized())return a;for(c=a.length+1;0<c;c--)b[c]=b[c-1];return b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id},b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id},b},d.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},d.convertUrlToData=function(a,b,c,d,e){var f=this,g=b?b:"csv",h=f.d3.xhr(a);c&&Object.keys(c).forEach(function(a){h.header(a,c[a])}),h.get(function(a,b){var c;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");c="json"===g?f.convertJsonToData(JSON.parse(b.response),d):"tsv"===g?f.convertTsvToData(b.response):f.convertCsvToData(b.response),e.call(f,c)})},d.convertXsvToData=function(a,b){var d,c=b.parseRows(a);return 1===c.length?(d=[{}],c[0].forEach(function(a){d[0][a]=null})):d=b.parse(a),d},d.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},d.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},d.convertJsonToData=function(a,b){var e,f,c=this,d=[];return b?(b.x?(e=b.value.concat(b.x),c.config.data_x=b.x):e=b.value,d.push(e),a.forEach(function(a){var b=[];e.forEach(function(d){var e=c.findValueInJson(a,d);o(e)&&(e=null),b.push(e)}),d.push(b)}),f=c.convertRowsToData(d)):(Object.keys(a).forEach(function(b){d.push([b].concat(a[b]))}),f=c.convertColumnsToData(d)),f},d.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split("."),d=0;d<c.length;++d){var e=c[d];if(!(e in a))return;a=a[e]}return a},d.convertRowsToData=function(a){var e,f,b=a[0],c={},d=[];for(e=1;e<a.length;e++){for(c={},f=0;f<a[e].length;f++){if(o(a[e][f]))throw new Error("Source data is missing a component at ("+e+","+f+")!");c[b[f]]=a[e][f]}d.push(c)}return d},d.convertColumnsToData=function(a){var c,d,e,b=[];for(c=0;c<a.length;c++)for(e=a[c][0],d=1;d<a[c].length;d++){if(o(b[d-1])&&(b[d-1]={}),o(a[c][d]))throw new Error("Source data is missing a component at ("+c+","+d+")!");b[d-1][e]=a[c][d]}return b},d.convertDataToTargets=function(a,b){var g,c=this,d=c.config,e=c.d3.keys(a[0]).filter(c.isNotX,c),f=c.d3.keys(a[0]).filter(c.isX,c);return e.forEach(function(e){var g=c.getXKey(e);c.isCustomX()||c.isTimeSeries()?f.indexOf(g)>=0?c.data.xs[e]=(b&&c.data.xs[e]?c.data.xs[e]:[]).concat(a.map(function(a){return a[g]}).filter(l).map(function(a,b){return c.generateTargetX(a,e,b)})):d.data_x?c.data.xs[e]=c.getOtherTargetXs():u(d.data_xs)&&(c.data.xs[e]=c.getXValuesOfXKey(g,c.data.targets)):c.data.xs[e]=a.map(function(a,b){return b})}),e.forEach(function(a){if(!c.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),g=e.map(function(b,e){var f=d.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var k,h=c.getXKey(b),i=a[h],j=null===a[b]||isNaN(a[b])?null:+a[b];return c.isCustomX()&&c.isCategorized()&&0===e&&!o(i)?(0===e&&0===g&&(d.axis_x_categories=[]),k=d.axis_x_categories.indexOf(i),k===-1&&(k=d.axis_x_categories.length,d.axis_x_categories.push(i))):k=c.generateTargetX(i,b,g),(o(a[b])||c.data.xs[b].length<=g)&&(k=void 0),{x:k,value:j,id:f}}).filter(function(a){return p(a.x)})}}),g.forEach(function(a){var b;d.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),c.data.xs[a.id].sort(function(a,b){return a-b})}),c.hasNegativeValue=c.hasNegativeValueInTargets(g),c.hasPositiveValue=c.hasPositiveValueInTargets(g),d.data_type&&c.setTargetType(c.mapToIds(g).filter(function(a){return!(a in d.data_types)}),d.data_type),g.forEach(function(a){c.addCache(a.id_org,a)}),g},d.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},d.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},d.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+k.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},d.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},d.initEventRect=function(){var a=this;a.main.select("."+k.chart).append("g").attr("class",k.eventRects).style("fill-opacity",0)},d.redrawEventRect=function(){var c,d,a=this,b=a.config,e=a.isMultipleX(),f=a.main.select("."+k.eventRects).style("cursor",b.zoom_enabled?b.axis_rotated?"ns-resize":"ew-resize":null).classed(k.eventRectsMultiple,e).classed(k.eventRectsSingle,!e);f.selectAll("."+k.eventRect).remove(),a.eventRect=f.selectAll("."+k.eventRect),e?(c=a.eventRect.data([0]),a.generateEventRectsForMultipleXs(c.enter()),a.updateEventRect(c)):(d=a.getMaxDataCountTarget(a.data.targets),f.datum(d?d.values:[]),a.eventRect=f.selectAll("."+k.eventRect),c=a.eventRect.data(function(a){return a}),a.generateEventRectsForSingleX(c.enter()),a.updateEventRect(c),c.exit().remove())},d.updateEventRect=function(a){var d,e,f,g,h,i,b=this,c=b.config;a=a||b.eventRect.data(function(a){return a}),b.isMultipleX()?(d=0,e=0,f=b.width,g=b.height):(!b.isCustomX()&&!b.isTimeSeries()||b.isCategorized()?(h=b.getEventRectWidth(),i=function(a){return b.x(a.x)-h/2}):(b.updateXs(),h=function(a){var d=b.getPrevX(a.index),e=b.getNextX(a.index);return null===d&&null===e?c.axis_rotated?b.height:b.width:(null===d&&(d=b.x.domain()[0]),null===e&&(e=b.x.domain()[1]),Math.max(0,(b.x(e)-b.x(d))/2))},i=function(a){var c=b.getPrevX(a.index),d=b.getNextX(a.index),e=b.data.xs[a.id][a.index];return null===c&&null===d?0:(null===c&&(c=b.x.domain()[0]),(b.x(e)+b.x(c))/2)}),d=c.axis_rotated?0:i,e=c.axis_rotated?i:0,f=c.axis_rotated?b.width:h,g=c.axis_rotated?h:b.height),a.attr("class",b.classEvent.bind(b)).attr("x",d).attr("y",e).attr("width",f).attr("height",g)},d.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+k.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+k.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+k.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+k.shape+"-"+f).each(function(){c.select(this).classed(k.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+k.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},d.generateEventRectsForMultipleXs=function(a){function e(){b.svg.select("."+k.eventRect).style("cursor",null),b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars()}var b=this,c=b.d3,d=b.config;a.append("rect").attr("x",0).attr("y",0).attr("width",b.width).attr("height",b.height).attr("class",k.eventRect).on("mouseout",function(){b.config&&(b.hasArcType()||e())}).on("mousemove",function(){var f,g,h,i,a=b.filterTargetsToShow(b.data.targets);if(!b.dragging&&!b.hasArcType(a)){if(f=c.mouse(this),g=b.findClosestFromTargets(a,f),!b.mouseover||g&&g.id===b.mouseover.id||(d.data_onmouseout.call(b.api,b.mouseover),b.mouseover=void 0),!g)return void e();h=b.isScatterType(g)||!d.tooltip_grouped?[g]:b.filterByX(a,g.x),i=h.map(function(a){return b.addName(a)}),b.showTooltip(i,this),d.point_focus_expand_enabled&&b.expandCircles(g.index,g.id,!0),b.expandBars(g.index,g.id,!0),b.showXGridFocus(i),(b.isBarType(g.id)||b.dist(g,f)<d.point_sensitivity)&&(b.svg.select("."+k.eventRect).style("cursor","pointer"),b.mouseover||(d.data_onmouseover.call(b.api,g),b.mouseover=g))}}).on("click",function(){var e,f,a=b.filterTargetsToShow(b.data.targets);b.hasArcType(a)||(e=c.mouse(this),f=b.findClosestFromTargets(a,e),f&&(b.isBarType(f.id)||b.dist(f,e)<d.point_sensitivity)&&b.main.selectAll("."+k.shapes+b.getTargetSelectorSuffix(f.id)).selectAll("."+k.shape+"-"+f.index).each(function(){(d.data_selection_grouped||b.isWithinShape(this,f))&&(b.toggleShape(this,f,f.index),b.config.data_onclick.call(b.api,f,this))}))}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},d.dispatchEvent=function(b,c,d){var e=this,f="."+k.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),l=document.createEvent("MouseEvents");l.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(l)},d.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},d.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")&&!b.gauge_fullCircle?2:1)},d.getCurrentPaddingTop=function(){var a=this,b=a.config,c=l(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},d.getCurrentPaddingBottom=function(){var a=this.config;return l(a.padding_bottom)?a.padding_bottom:0},d.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return l(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(q(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:q(b.getAxisWidthByAxisId("y",a))},d.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return l(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):q(a.getAxisWidthByAxisId("y2"))+d},d.getParentRectValue=function(a){for(var c,b=this.selectChart.node();b&&"BODY"!==b.tagName;){try{c=b.getBoundingClientRect()[a]}catch(d){"width"===a&&(c=b.offsetWidth)}if(c)break;b=b.parentNode}return c},d.getParentWidth=function(){return this.getParentRectValue("width")},d.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},d.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?k.axisX:k.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},d.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},d.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),"y"===a&&c.axis_rotated&&c.axis_y_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_y_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},d.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},d.getShapeIndices=function(a){var f,g,b=this,c=b.config,d={},e=0;return b.filterTargetsToShow(b.data.targets.filter(a,b)).forEach(function(a){for(f=0;f<c.data_groups.length;f++)if(!(c.data_groups[f].indexOf(a.id)<0))for(g=0;g<c.data_groups[f].length;g++)if(c.data_groups[f][g]in d){d[a.id]=d[c.data_groups[f][g]];break}o(d[a.id])&&(d[a.id]=e++)}),d.__max__=e-1,d},d.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},d.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},d.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&("undefined"!=typeof e[g]&&+e[g].x===+a.x||(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i))}),j}},d.isWithinShape=function(a,b){var e,c=this,d=c.d3.select(a);return c.isTargetToShow(b.id)?"circle"===a.nodeName?e=c.isStepType(b)?c.isWithinStep(a,c.getYScale(b.id)(b.value)):c.isWithinCircle(a,1.5*c.pointSelectR(b)):"path"===a.nodeName&&(e=!d.classed(k.bar)||c.isWithinBar(a)):e=!1,e},d.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},d.initLine=function(){var a=this;a.main.select("."+k.chart).append("g").attr("class",k.chartLines)},d.updateTargetsForLine=function(a){var d,e,b=this,c=b.config,f=b.classChartLine.bind(b),g=b.classLines.bind(b),h=b.classAreas.bind(b),i=b.classCircles.bind(b),j=b.classFocus.bind(b);d=b.main.select("."+k.chartLines).selectAll("."+k.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),e=d.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),e.append("g").attr("class",g),e.append("g").attr("class",h),e.append("g").attr("class",function(a){return b.generateClass(k.selectedCircles,a.id)}),e.append("g").attr("class",i).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){b.main.selectAll("."+k.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+k.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},d.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+k.lines).selectAll("."+k.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},d.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},d.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var l,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,h=b?c.x:c.subX,i=g.call(c,a.id),j=0,k=0;return c.isLineType(a)?d.data_regions[a.id]?l=c.lineWithRegions(f,h,i,d.data_regions[a.id]):(c.isStepType(a)&&(f=c.convertValuesToStep(f)),l=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(j=h(f[0].x),k=i(f[0].value)),l=d.axis_rotated?"M "+k+" "+j:"M "+j+" "+k),l?l:"M 0 0"}},d.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},d.lineWithRegions=function(a,b,c,d){function y(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function z(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var h,i,k,l,m,n,q,r,s,t,v,w,e=this,f=e.config,g=-1,j="M",u=e.isCategorized()?.5:0,x=[];if(p(d))for(h=0;h<d.length;h++)x[h]={},o(d[h].start)?x[h].start=a[0].x:x[h].start=e.isTimeSeries()?e.parseDate(d[h].start):d[h].start,o(d[h].end)?x[h].end=a[a.length-1].x:x[h].end=e.isTimeSeries()?e.parseDate(d[h].end):d[h].end;for(v=f.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},w=f.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},k=e.isTimeSeries()?function(a,d,e,g){var l,h=a.x.getTime(),i=d.x-a.x,j=new Date(h+i*e),k=new Date(h+i*(e+g));return l=f.axis_rotated?[[c(m(e)),b(j)],[c(m(e+g)),b(k)]]:[[b(j),c(m(e))],[b(k),c(m(e+g))]],z(l)}:function(a,d,e,g){var h;return h=f.axis_rotated?[[c(m(e),!0),b(l(e))],[c(m(e+g),!0),b(l(e+g))]]:[[b(l(e),!0),c(m(e))],[b(l(e+g),!0),c(m(e+g))]],z(h)},h=0;h<a.length;h++){if(o(x)||!y(a[h].x,x))j+=" "+v(a[h])+" "+w(a[h]);else for(l=e.getScale(a[h-1].x+u,a[h].x+u,e.isTimeSeries()),m=e.getScale(a[h-1].value,a[h].value),n=b(a[h].x)-b(a[h-1].x),q=c(a[h].value)-c(a[h-1].value),r=Math.sqrt(Math.pow(n,2)+Math.pow(q,2)),s=2/r,t=2*s,i=s;i<=1;i+=t)j+=k(a[h-1],a[h],i,s);g=a[h].x}return j},d.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+k.areas).selectAll("."+k.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},d.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},d.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(d.area_above?0:i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var h,b=d.line_connectNull?c.filterRemoveNull(a.values):a.values,f=0,g=0;return c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),h=e.interpolate(c.getInterpolate(a))(b)):(b[0]&&(f=c.x(b[0].x),g=c.getYScale(a.id)(b[0].value)),h=d.axis_rotated?"M "+g+" "+f:"M "+f+" "+g),h?h:"M 0 0"}},d.getAreaBaseValue=function(){return 0},d.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&l<e||a.value<0&&e<l)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},d.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+k.circles).selectAll("."+k.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},d.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+k.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]},d.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},d.updateCircleY=function(){var b,c,a=this;a.config.data_groups.length>0?(b=a.getShapeIndices(a.isLineType),c=a.generateGetLinePoints(b),a.circleY=function(a,b){return c(a,b)[0][1]}):a.circleY=function(b){return a.getYScale(b.id)(b.value)}},d.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+k.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+k.circle+(l(a)?"-"+a:""))},d.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(k.EXPANDED,!0).attr("r",e)},d.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(k.EXPANDED)}).classed(k.EXPANDED,!1).attr("r",c)},d.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:m(c.point_r)?c.point_r(a):c.point_r;
},d.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},d.pointSelectR=function(a){var b=this,c=b.config;return m(c.point_select_r)?c.point_select_r(a):c.point_select_r?c.point_select_r:4*b.pointR(a)},d.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},d.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},d.initBar=function(){var a=this;a.main.select("."+k.chart).append("g").attr("class",k.chartBars)},d.updateTargetsForBar=function(a){var d,e,b=this,c=b.config,f=b.classChartBar.bind(b),g=b.classBars.bind(b),h=b.classFocus.bind(b);d=b.main.select("."+k.chartBars).selectAll("."+k.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),e=d.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),e.append("g").attr("class",g).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null})},d.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+k.bars).selectAll("."+k.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},d.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},d.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},d.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+k.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+k.bar+(l(a)?"-"+a:""))},d.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(k.EXPANDED,!0)},d.unexpandBars=function(a){var b=this;b.getBars(a).classed(k.EXPANDED,!1)},d.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},d.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&l<d||a.value<0&&d<l)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},d.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},d.initText=function(){var a=this;a.main.select("."+k.chart).append("g").attr("class",k.chartTexts),a.mainText=a.d3.selectAll([])},d.updateTargetsForText=function(a){var c,d,b=this,e=b.classChartText.bind(b),f=b.classTexts.bind(b),g=b.classFocus.bind(b);c=b.main.select("."+k.chartTexts).selectAll("."+k.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),d=c.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),d.append("g").attr("class",f)},d.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+k.texts).selectAll("."+k.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},d.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},d.getTextRect=function(a,b,c){var g,d=this.d3.select("body").append("div").classed("c3",!0),e=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),f=this.d3.select(c).style("font");return e.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",f).text(a).each(function(){g=this.getBoundingClientRect()}),d.remove(),g},d.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},d.getXForText=function(a,b,c){var f,g,d=this,e=c.getBoundingClientRect();return d.config.axis_rotated?(g=d.isBarType(b)?4:6,f=a[2][1]+g*(b.value<0?-1:1)):f=d.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(f>d.width?f=d.width-e.width:f<0&&(f=4)),f},d.getYForText=function(a,b,c){var f,d=this,e=c.getBoundingClientRect();return d.config.axis_rotated?f=(a[0][0]+a[2][0]+.6*e.height)/2:(f=a[2][1],b.value<0||0===b.value&&!d.hasPositiveValue?(f+=e.height,d.isBarType(b)&&d.isSafari()?f-=3:!d.isBarType(b)&&d.isChrome()&&(f+=3)):f+=d.isBarType(b)?-3:-6),null!==b.value||d.config.axis_rotated||(f<e.height?f=e.height:f>this.height&&(f=this.height-4)),f},d.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},d.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},d.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},d.isLineType=function(a){var b=this.config,c=n(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},d.isStepType=function(a){var b=n(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},d.isSplineType=function(a){var b=n(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},d.isAreaType=function(a){var b=n(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},d.isBarType=function(a){var b=n(a)?a:a.id;return"bar"===this.config.data_types[b]},d.isScatterType=function(a){var b=n(a)?a:a.id;return"scatter"===this.config.data_types[b]},d.isPieType=function(a){var b=n(a)?a:a.id;return"pie"===this.config.data_types[b]},d.isGaugeType=function(a){var b=n(a)?a:a.id;return"gauge"===this.config.data_types[b]},d.isDonutType=function(a){var b=n(a)?a:a.id;return"donut"===this.config.data_types[b]},d.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},d.lineData=function(a){return this.isLineType(a)?[a]:[]},d.arcData=function(a){return this.isArcType(a.data)?[a]:[]},d.barData=function(a){return this.isBarType(a)?a.values:[]},d.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},d.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},d.isInterpolationType=function(a){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)>=0},d.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",k.grid),b.grid_x_show&&a.grid.append("g").attr("class",k.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",k.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",k.xgridFocus).append("line").attr("class",k.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},d.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",k.grid+" "+k.gridLines),a.gridLines.append("g").attr("class",k.xgridLines),a.gridLines.append("g").attr("class",k.ygridLines),a.xgridLines=b.selectAll([])},d.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+k.xgrids).selectAll("."+k.xgrid).data(e),b.xgrid.enter().append("line").attr("class",k.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},d.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+k.ygrids).selectAll("."+k.ygrid).data(c),a.ygrid.enter().append("line").attr("class",k.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},d.gridTextAnchor=function(a){return a.position?a.position:"end"},d.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},d.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},d.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},d.updateGrid=function(a){var e,f,g,b=this,c=b.main,d=b.config;b.grid.style("visibility",b.hasArcType()?"hidden":"visible"),c.select("line."+k.xgridFocus).style("visibility","hidden"),d.grid_x_show&&b.updateXGrid(),b.xgridLines=c.select("."+k.xgridLines).selectAll("."+k.xgridLine).data(d.grid_x_lines),e=b.xgridLines.enter().append("g").attr("class",function(a){return k.xgridLine+(a.class?" "+a.class:"")}),e.append("line").style("opacity",0),e.append("text").attr("text-anchor",b.gridTextAnchor).attr("transform",d.axis_rotated?"":"rotate(-90)").attr("dx",b.gridTextDx).attr("dy",-5).style("opacity",0),b.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),d.grid_y_show&&b.updateYGrid(),b.ygridLines=c.select("."+k.ygridLines).selectAll("."+k.ygridLine).data(d.grid_y_lines),f=b.ygridLines.enter().append("g").attr("class",function(a){return k.ygridLine+(a.class?" "+a.class:"")}),f.append("line").style("opacity",0),f.append("text").attr("text-anchor",b.gridTextAnchor).attr("transform",d.axis_rotated?"rotate(-90)":"").attr("dx",b.gridTextDx).attr("dy",-5).style("opacity",0),g=b.yv.bind(b),b.ygridLines.select("line").transition().duration(a).attr("x1",d.axis_rotated?g:0).attr("x2",d.axis_rotated?g:b.width).attr("y1",d.axis_rotated?0:g).attr("y2",d.axis_rotated?b.height:g).style("opacity",1),b.ygridLines.select("text").transition().duration(a).attr("x",d.axis_rotated?b.xGridTextX.bind(b):b.yGridTextX.bind(b)).attr("y",g).text(function(a){return a.text}).style("opacity",1),b.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},d.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},d.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&l(a.value)}),e=b.main.selectAll("line."+k.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},d.hideXGridFocus=function(){this.main.select("line."+k.xgridFocus).style("visibility","hidden")},d.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+k.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},d.generateGridData=function(a,b){var e,f,g,h,c=this,d=[],i=c.main.select("."+k.axisX).selectAll(".tick").size();if("year"===a)for(e=c.getXDomain(),f=e[0].getFullYear(),g=e[1].getFullYear(),h=f;h<=g;h++)d.push(new Date(h+"-01-01 00:00:00"));else d=b.ticks(10),d.length>i&&(d=d.filter(function(a){return(""+a).indexOf(".")<0}));return d},d.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b.class===a.class)&&(c=!0)}),c}:function(){return!0}},d.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?k.xgridLines:k.ygridLines,h=b?k.xgridLine:k.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},d.initTooltip=function(){var c,a=this,b=a.config;if(a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",k.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),b.tooltip_init_show){if(a.isTimeSeries()&&n(b.tooltip_init_x)){for(b.tooltip_init_x=a.parseDate(b.tooltip_init_x),c=0;c<a.data.targets[0].values.length&&a.data.targets[0].values[c].x-b.tooltip_init_x!==0;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color)),a.tooltip.style("top",b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}},d.getTooltipContent=function(a,b,c,d){var j,k,l,m,n,o,e=this,f=e.config,g=f.tooltip_format_title||b,h=f.tooltip_format_name||function(a){return a},i=f.tooltip_format_value||c,p=e.isOrderAsc();if(0===f.data_groups.length)a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return p?c-d:d-c});else{var q=e.orderTargets(e.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;return c>0&&d>0&&(c=a?q.indexOf(a.id):null,d=b?q.indexOf(b.id):null),p?c-d:d-c})}for(k=0;k<a.length;k++)if(a[k]&&(a[k].value||0===a[k].value)&&(j||(l=x(g?g(a[k].x):a[k].x),j="<table class='"+e.CLASS.tooltip+"'>"+(l||0===l?"<tr><th colspan='2'>"+l+"</th></tr>":"")),m=x(i(a[k].value,a[k].ratio,a[k].id,a[k].index,a)),void 0!==m)){if(null===a[k].name)continue;n=x(h(a[k].name,a[k].ratio,a[k].id,a[k].index)),o=e.levelColor?e.levelColor(a[k].value):d(a[k].id),j+="<tr class='"+e.CLASS.tooltipName+"-"+e.getTargetSelectorSuffix(a[k].id)+"'>",j+="<td class='name'><span style='background-color:"+o+"'></span>"+n+"</td>",j+="<td class='value'>"+m+"</td>",j+="</tr>"}return j+"</table>"},d.tooltipPosition=function(a,b,c,d){var h,i,j,k,l,e=this,f=e.config,g=e.d3,m=e.hasArcType(),n=g.mouse(d);return m?(i=(e.width-(e.isLegendRight?e.getLegendWidth():0))/2+n[0],k=e.height/2+n[1]+20):(h=e.getSvgLeft(!0),f.axis_rotated?(i=h+n[0]+100,j=i+b,l=e.currentWidth-e.getCurrentPaddingRight(),k=e.x(a[0].x)+20):(i=h+e.getCurrentPaddingLeft(!0)+e.x(a[0].x)+20,j=i+b,l=h+e.currentWidth-e.getCurrentPaddingRight(),k=n[1]+15),j>l&&(i-=j-l+20),k+c>e.currentHeight&&(k-=c+30)),k<0&&(k=0),{top:k,left:i}},d.showTooltip=function(a,b){var f,g,h,c=this,e=c.config,i=c.hasArcType(),j=a.filter(function(a){return a&&l(a.value)}),k=e.tooltip_position||d.tooltipPosition;0!==j.length&&e.tooltip_show&&(c.tooltip.html(e.tooltip_contents.call(c,a,c.axis.getXAxisTickFormat(),c.getYFormat(i),c.color)).style("display","block"),f=c.tooltip.property("offsetWidth"),g=c.tooltip.property("offsetHeight"),h=k.call(this,j,f,g,b),c.tooltip.style("top",h.top+"px").style("left",h.left+"px"))},d.hideTooltip=function(){this.tooltip.style("display","none")},d.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},d.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},d.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},d.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},d.updateLegendStep=function(a){this.legendStep=a},d.updateLegendItemWidth=function(a){this.legendItemWidth=a},d.updateLegendItemHeight=function(a){this.legendItemHeight=a},d.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},d.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},d.opacityForLegend=function(a){return a.classed(k.legendItemHidden)?null:1},d.opacityForUnfocusedLegend=function(a){return a.classed(k.legendItemHidden)?null:.3},d.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+k.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(k.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},d.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+k.legendItem).classed(k.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},d.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},d.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&t(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},d.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},d.updateLegend=function(a,b,c){function L(a,b){return d.legendItemTextBox[b]||(d.legendItemTextBox[b]=d.getTextRect(a.textContent,k.legendItem,a)),d.legendItemTextBox[b]}function M(b,c,f){function p(a,b){b||(n=(m-y-l)/2,n<u&&(n=(m-l)/2,y=0,E++)),D[a]=E,C[E]=d.isLegendInset?10:n,z[a]=y,y+=l}var n,o,g=0===f,h=f===a.length-1,i=L(b,c),j=i.width+w+(!h||d.isLegendRight||d.isLegendInset?r:0)+e.legend_padding,k=i.height+q,l=d.isLegendRight||d.isLegendInset?k:j,m=d.isLegendRight||d.isLegendInset?d.getLegendHeight():d.getLegendWidth();return g&&(y=0,E=0,s=0,t=0),e.legend_show&&!d.isLegendToShow(c)?void(A[c]=B[c]=D[c]=z[c]=0):(A[c]=j,B[c]=k,(!s||j>=s)&&(s=j),(!t||k>=t)&&(t=k),o=d.isLegendRight||d.isLegendInset?t:s,void(e.legend_equally?(Object.keys(A).forEach(function(a){A[a]=s}),Object.keys(B).forEach(function(a){B[a]=t}),n=(m-o*a.length)/2,n<u?(y=0,E=0,a.forEach(function(a){p(a)})):p(c,!0)):p(c)))}var f,g,h,i,j,l,m,n,o,x,F,G,H,I,J,K,d=this,e=d.config,q=4,r=10,s=0,t=0,u=10,w=e.legend_item_tile_width+5,y=0,z={},A={},B={},C=[0],D={},E=0;a=a.filter(function(a){return!p(e.data_names[a])||null!==e.data_names[a]}),b=b||{},F=v(b,"withTransition",!0),G=v(b,"withTransitionForTransform",!0),d.isLegendInset&&(E=e.legend_inset_step?e.legend_inset_step:a.length,d.updateLegendStep(E)),d.isLegendRight?(f=function(a){return s*D[a]},i=function(a){return C[D[a]]+z[a]}):d.isLegendInset?(f=function(a){return s*D[a]+10},i=function(a){return C[D[a]]+z[a]}):(f=function(a){return C[D[a]]+z[a]},i=function(a){return t*D[a]}),g=function(a,b){return f(a,b)+4+e.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},l=function(a,b){return i(a,b)-5},m=function(a,b){return f(a,b)-2},n=function(a,b){return f(a,b)-2+e.legend_item_tile_width},o=function(a,b){return i(a,b)+4},x=d.legend.selectAll("."+k.legendItem).data(a).enter().append("g").attr("class",function(a){return d.generateClass(k.legendItem,a)}).style("visibility",function(a){return d.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){e.legend_item_onclick?e.legend_item_onclick.call(d,a):d.d3.event.altKey?(d.api.hide(),d.api.show(a)):(d.api.toggle(a),d.isTargetToShow(a)?d.api.focus(a):d.api.revert())}).on("mouseover",function(a){e.legend_item_onmouseover?e.legend_item_onmouseover.call(d,a):(d.d3.select(this).classed(k.legendItemFocused,!0),!d.transiting&&d.isTargetToShow(a)&&d.api.focus(a))}).on("mouseout",function(a){e.legend_item_onmouseout?e.legend_item_onmouseout.call(d,a):(d.d3.select(this).classed(k.legendItemFocused,!1),d.api.revert())}),x.append("text").text(function(a){return p(e.data_names[a])?e.data_names[a]:a}).each(function(a,b){M(this,a,b)}).style("pointer-events","none").attr("x",d.isLegendRight||d.isLegendInset?g:-200).attr("y",d.isLegendRight||d.isLegendInset?-200:j),x.append("rect").attr("class",k.legendItemEvent).style("fill-opacity",0).attr("x",d.isLegendRight||d.isLegendInset?h:-200).attr("y",d.isLegendRight||d.isLegendInset?-200:l),x.append("line").attr("class",k.legendItemTile).style("stroke",d.color).style("pointer-events","none").attr("x1",d.isLegendRight||d.isLegendInset?m:-200).attr("y1",d.isLegendRight||d.isLegendInset?-200:o).attr("x2",d.isLegendRight||d.isLegendInset?n:-200).attr("y2",d.isLegendRight||d.isLegendInset?-200:o).attr("stroke-width",e.legend_item_tile_height),K=d.legend.select("."+k.legendBackground+" rect"),d.isLegendInset&&s>0&&0===K.size()&&(K=d.legend.insert("g","."+k.legendItem).attr("class",k.legendBackground).append("rect")),H=d.legend.selectAll("text").data(a).text(function(a){return p(e.data_names[a])?e.data_names[a]:a}).each(function(a,b){M(this,a,b)}),(F?H.transition():H).attr("x",g).attr("y",j),I=d.legend.selectAll("rect."+k.legendItemEvent).data(a),(F?I.transition():I).attr("width",function(a){return A[a]}).attr("height",function(a){return B[a]}).attr("x",h).attr("y",l),J=d.legend.selectAll("line."+k.legendItemTile).data(a),(F?J.transition():J).style("stroke",d.color).attr("x1",m).attr("y1",o).attr("x2",n).attr("y2",o),K&&(F?K.transition():K).attr("height",d.getLegendHeight()-12).attr("width",s*(E+1)+10),d.legend.selectAll("."+k.legendItem).classed(k.legendItemHidden,function(a){return!d.isTargetToShow(a)}),d.updateLegendItemWidth(s),d.updateLegendItemHeight(t),d.updateLegendStep(E),d.updateSizes(),d.updateScales(),d.updateSvgSize(),d.transformAll(G,c),d.legendHasRendered=!0},d.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},d.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},d.xForTitle=function(){var d,a=this,b=a.config,c=b.title_position||"left";return d=c.indexOf("right")>=0?a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width-b.title_padding.right:c.indexOf("center")>=0?(a.currentWidth-a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).width)/2:b.title_padding.left},d.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},d.getTitlePadding=function(){var a=this;return a.yForTitle()+a.config.title_padding.bottom},g(f,j),j.prototype.init=function(){var b=this.owner,c=b.config,d=b.main;b.axes.x=d.append("g").attr("class",k.axis+" "+k.axisX).attr("clip-path",b.clipPathForXAxis).attr("transform",b.getTranslate("x")).style("visibility",c.axis_x_show?"visible":"hidden"),b.axes.x.append("text").attr("class",k.axisXLabel).attr("transform",c.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),b.axes.y=d.append("g").attr("class",k.axis+" "+k.axisY).attr("clip-path",c.axis_y_inner?"":b.clipPathForYAxis).attr("transform",b.getTranslate("y")).style("visibility",c.axis_y_show?"visible":"hidden"),b.axes.y.append("text").attr("class",k.axisYLabel).attr("transform",c.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),b.axes.y2=d.append("g").attr("class",k.axis+" "+k.axisY2).attr("transform",b.getTranslate("y2")).style("visibility",c.axis_y2_show?"visible":"hidden"),b.axes.y2.append("text").attr("class",k.axisY2Label).attr("transform",c.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},j.prototype.getXAxis=function(b,c,d,e,f,g,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:f,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:g},l=A(i.d3,k).scale(b).orient(c);return i.isTimeSeries()&&e&&"function"!=typeof e&&(e=e.map(function(a){return i.parseDate(a)})),l.tickFormat(d).tickValues(e),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),t(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},j.prototype.updateXAxisTickValues=function(b,c){var f,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(f=this.generateTickValues(d.mapTargetsToUniqueXs(b),e.axis_x_tick_count,d.isTimeSeries())),c?c.tickValues(f):(d.xAxis.tickValues(f),d.subXAxis.tickValues(f)),f},j.prototype.getYAxis=function(b,c,d,e,f,g,h){var i=this.owner,j=i.config,k={withOuterTick:f,withoutTransition:g,tickTextRotate:h?0:j.axis_y_tick_rotate},l=A(i.d3,k).scale(b).orient(c).tickFormat(d);return i.isTimeSeriesY()?l.ticks(i.d3.time[j.axis_y_tick_time_value],j.axis_y_tick_time_interval):l.tickValues(e),l},j.prototype.getId=function(b){var c=this.owner.config;return b in c.data_axes?c.data_axes[b]:"y"},j.prototype.getXAxisTickFormat=function(){var b=this.owner,c=b.config,d=b.isTimeSeries()?b.defaultAxisTimeFormat:b.isCategorized()?b.categoryName:function(a){return a<0?a.toFixed(0):a};return c.axis_x_tick_format&&(m(c.axis_x_tick_format)?d=c.axis_x_tick_format:b.isTimeSeries()&&(d=function(a){return a?b.axisTimeFormat(c.axis_x_tick_format)(a):""})),m(d)?function(a){return d.call(b,a)}:d},j.prototype.getTickValues=function(b,c){return b?b:c?c.tickValues():void 0},j.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},j.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},j.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},j.prototype.getLabelOptionByAxisId=function(b){var e,c=this.owner,d=c.config;return"y"===b?e=d.axis_y_label:"y2"===b?e=d.axis_y2_label:"x"===b&&(e=d.axis_x_label),e},j.prototype.getLabelText=function(b){var c=this.getLabelOptionByAxisId(b);return n(c)?c:c?c.text:null},j.prototype.setLabelText=function(b,c){var d=this.owner,e=d.config,f=this.getLabelOptionByAxisId(b);n(f)?"y"===b?e.axis_y_label=c:"y2"===b?e.axis_y2_label=c:"x"===b&&(e.axis_x_label=c):f&&(f.text=c)},j.prototype.getLabelPosition=function(b,c){var d=this.getLabelOptionByAxisId(b),e=d&&"object"==typeof d&&d.position?d.position:c;return{isInner:e.indexOf("inner")>=0,isOuter:e.indexOf("outer")>=0,isLeft:e.indexOf("left")>=0,isCenter:e.indexOf("center")>=0,isRight:e.indexOf("right")>=0,isTop:e.indexOf("top")>=0,isMiddle:e.indexOf("middle")>=0,isBottom:e.indexOf("bottom")>=0}},j.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},j.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},j.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},j.prototype.getLabelPositionById=function(b){return"y2"===b?this.getY2AxisLabelPosition():"y"===b?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},j.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},j.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},j.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},j.prototype.xForAxisLabel=function(b,c){var d=this.owner;return b?c.isLeft?0:c.isCenter?d.width/2:d.width:c.isBottom?-d.height:c.isMiddle?-d.height/2:0},j.prototype.dxForAxisLabel=function(b,c){return b?c.isLeft?"0.5em":c.isRight?"-0.5em":"0":c.isTop?"-0.5em":c.isBottom?"0.5em":"0"},j.prototype.textAnchorForAxisLabel=function(b,c){return b?c.isLeft?"start":c.isCenter?"middle":"end":c.isBottom?"start":c.isMiddle?"middle":"end"},j.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.dyForXAxisLabel=function(){var b=this.owner,c=b.config,d=this.getXAxisLabelPosition();return c.axis_rotated?d.isInner?"1.2em":-25-this.getMaxTickWidth("x"):d.isInner?"-0.5em":c.axis_x_height?c.axis_x_height-10:"3em"},j.prototype.dyForYAxisLabel=function(){var b=this.owner,c=this.getYAxisLabelPosition();return b.config.axis_rotated?c.isInner?"-0.5em":"3em":c.isInner?"1.2em":-10-(b.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},j.prototype.dyForY2AxisLabel=function(){var b=this.owner,c=this.getY2AxisLabelPosition();return b.config.axis_rotated?c.isInner?"1.2em":"-2.2em":c.isInner?"-0.5em":15+(b.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},j.prototype.textAnchorForXAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(!b.config.axis_rotated,this.getXAxisLabelPosition())},j.prototype.textAnchorForYAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getYAxisLabelPosition())},j.prototype.textAnchorForY2AxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getY2AxisLabelPosition())},j.prototype.getMaxTickWidth=function(b,c){var g,h,i,j,k,d=this.owner,e=d.config,f=0;return c&&d.currentMaxTickWidths[b]?d.currentMaxTickWidths[b]:(d.svg&&(g=d.filterTargetsToShow(d.data.targets),"y"===b?(h=d.y.copy().domain(d.getYDomain(g,"y")),i=this.getYAxis(h,d.yOrient,e.axis_y_tick_format,d.yAxisTickValues,!1,!0,!0)):"y2"===b?(h=d.y2.copy().domain(d.getYDomain(g,"y2")),
i=this.getYAxis(h,d.y2Orient,e.axis_y2_tick_format,d.y2AxisTickValues,!1,!0,!0)):(h=d.x.copy().domain(d.getXDomain(g)),i=this.getXAxis(h,d.xOrient,d.xAxisTickFormat,d.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(g,i)),j=d.d3.select("body").append("div").classed("c3",!0),k=j.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),k.append("g").call(i).each(function(){d.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();f<a.width&&(f=a.width)}),j.remove()})),d.currentMaxTickWidths[b]=f<=0?d.currentMaxTickWidths[b]:f,d.currentMaxTickWidths[b])},j.prototype.updateLabels=function(b){var c=this.owner,d=c.main.select("."+k.axisX+" ."+k.axisXLabel),e=c.main.select("."+k.axisY+" ."+k.axisYLabel),f=c.main.select("."+k.axisY2+" ."+k.axisY2Label);(b?d.transition():d).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(b?e.transition():e).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(b?f.transition():f).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},j.prototype.getPadding=function(b,c,d,e){var f="number"==typeof b?b:b[c];return l(f)?"ratio"===b.unit?b[c]*e:this.convertPixelsToAxisPadding(f,e):d},j.prototype.convertPixelsToAxisPadding=function(b,c){var d=this.owner,e=d.config.axis_rotated?d.width:d.height;return c*(b/e)},j.prototype.generateTickValues=function(b,c,d){var f,g,h,i,j,k,l,e=b;if(c)if(f=m(c)?c():c,1===f)e=[b[0]];else if(2===f)e=[b[0],b[b.length-1]];else if(f>2){for(i=f-2,g=b[0],h=b[b.length-1],j=(h-g)/(i+1),e=[g],k=0;k<i;k++)l=+g+j*(k+1),e.push(d?new Date(l):l);e.push(h)}return d||(e=e.sort(function(a,b){return a-b})),e},j.prototype.generateTransitions=function(b){var c=this.owner,d=c.axes;return{axisX:b?d.x.transition().duration(b):d.x,axisY:b?d.y.transition().duration(b):d.y,axisY2:b?d.y2.transition().duration(b):d.y2,axisSubX:b?d.subx.transition().duration(b):d.subx}},j.prototype.redraw=function(b,c){var d=this.owner;d.axes.x.style("opacity",c?0:1),d.axes.y.style("opacity",c?0:1),d.axes.y2.style("opacity",c?0:1),d.axes.subx.style("opacity",c?0:1),b.axisX.call(d.xAxis),b.axisY.call(d.yAxis),b.axisY2.call(d.y2Axis),b.axisSubX.call(d.subXAxis)},d.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},d.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},d.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},d.getAxisClipY=function(a){return a?-20:-this.margin.top},d.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},d.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},d.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},d.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},d.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},d.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},d.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},d.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},d.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},d.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},d.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},d.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},d.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},d.updateAngle=function(a){var f,g,h,i,b=this,c=b.config,d=!1,e=0;return c?(b.pie(b.filterTargetsToShow(b.data.targets)).forEach(function(b){d||b.data.id!==a.data.id||(d=!0,a=b,a.index=e),e++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),b.isGaugeType(a.data)&&(f=c.gauge_min,g=c.gauge_max,h=Math.PI*(c.gauge_fullCircle?2:1)/(g-f),i=a.value<f?0:a.value<g?a.value-f:g-f,a.startAngle=c.gauge_startingAngle,a.endAngle=a.startAngle+h*i),d?a:null):null},d.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},d.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},d.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},d.transformForArcLabel=function(a){var e,f,g,h,i,b=this,c=b.config,d=b.updateAngle(a),j="";return d&&!b.hasType("gauge")&&(e=this.svgArc.centroid(d),f=isNaN(e[0])?0:e[0],g=isNaN(e[1])?0:e[1],h=Math.sqrt(f*f+g*g),i=b.hasType("donut")&&c.donut_label_ratio?m(c.donut_label_ratio)?c.donut_label_ratio(a,b.radius,h):c.donut_label_ratio:b.hasType("pie")&&c.pie_label_ratio?m(c.pie_label_ratio)?c.pie_label_ratio(a,b.radius,h):c.pie_label_ratio:b.radius&&h?(36/b.radius>.375?1.175-36/b.radius:.8)*b.radius/h:0,j="translate("+f*i+","+g*i+")"),j},d.getArcRatio=function(a){var b=this,c=b.config,d=Math.PI*(b.hasType("gauge")&&!c.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/d:null},d.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},d.textForArcLabel=function(a){var c,d,e,f,g,b=this;return b.shouldShowArcLabel()?(c=b.updateAngle(a),d=c?c.value:null,e=b.getArcRatio(c),f=a.data.id,b.hasType("gauge")||b.meetsArcLabelThreshold(e)?(g=b.getArcLabelFormat(),g?g(d,e,f):b.defaultArcValueFormat(d,e)):""):""},d.expandArc=function(b){var d,c=this;return c.transiting?void(d=a.setInterval(function(){c.transiting||(a.clearInterval(d),c.legend.selectAll(".c3-legend-item-focused").size()>0&&c.expandArc(b))},10)):(b=c.mapToTargetIds(b),void c.svg.selectAll(c.selectorTargets(b,"."+k.chartArc)).each(function(a){c.shouldExpand(a.data.id)&&c.d3.select(this).selectAll("path").transition().duration(c.expandDuration(a.data.id)).attr("d",c.svgArcExpanded).transition().duration(2*c.expandDuration(a.data.id)).attr("d",c.svgArcExpandedSub).each(function(a){c.isDonutType(a.data)})}))},d.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+k.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+k.arc).style("opacity",1))},d.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},d.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},d.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},d.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},d.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},d.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},d.updateTargetsForArc=function(a){var d,e,b=this,c=b.main,f=b.classChartArc.bind(b),g=b.classArcs.bind(b),h=b.classFocus.bind(b);d=c.select("."+k.chartArcs).selectAll("."+k.chartArc).data(b.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),e=d.enter().append("g").attr("class",f),e.append("g").attr("class",g),e.append("text").attr("dy",b.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},d.initArc=function(){var a=this;a.arcs=a.main.select("."+k.chart).append("g").attr("class",k.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",k.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},d.redrawArc=function(a,b,c){var h,d=this,e=d.d3,f=d.config,g=d.main;h=g.selectAll("."+k.arcs).selectAll("."+k.arc).data(d.arcData.bind(d)),h.enter().append("path").attr("class",d.classArc.bind(d)).style("fill",function(a){return d.color(a.data)}).style("cursor",function(a){return f.interaction_enabled&&f.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){d.isGaugeType(a.data)&&(a.startAngle=a.endAngle=f.gauge_startingAngle),this._current=a}),h.attr("transform",function(a){return!d.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",f.interaction_enabled?function(a){var b,c;d.transiting||(b=d.updateAngle(a),b&&(c=d.convertToArcData(b),d.expandArc(b.data.id),d.api.focus(b.data.id),d.toggleFocusLegend(b.data.id,!0),d.config.data_onmouseover(c,this)))}:null).on("mousemove",f.interaction_enabled?function(a){var c,e,b=d.updateAngle(a);b&&(c=d.convertToArcData(b),e=[c],d.showTooltip(e,this))}:null).on("mouseout",f.interaction_enabled?function(a){var b,c;d.transiting||(b=d.updateAngle(a),b&&(c=d.convertToArcData(b),d.unexpandArc(b.data.id),d.api.revert(),d.revertLegend(),d.hideTooltip(),d.config.data_onmouseout(c,this)))}:null).on("click",f.interaction_enabled?function(a,b){var e,c=d.updateAngle(a);c&&(e=d.convertToArcData(c),d.toggleShape&&d.toggleShape(this,e,b),d.config.data_onclick.call(d.api,e,this))}:null).each(function(){d.transiting=!0}).transition().duration(a).attrTween("d",function(a){var c,b=d.updateAngle(a);return b?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),c=e.interpolate(this._current,b),this._current=c(0),function(b){var e=c(b);return e.data=a.data,d.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):d.color(a.data.id)}).style("opacity",1).call(d.endall,function(){d.transiting=!1}),h.exit().transition().duration(b).style("opacity",0).remove(),g.selectAll("."+k.chartArc).select("text").style("opacity",0).attr("class",function(a){return d.isGaugeType(a.data)?k.gaugeValue:""}).text(d.textForArcLabel.bind(d)).attr("transform",d.transformForArcLabel.bind(d)).style("font-size",function(a){return d.isGaugeType(a.data)?Math.round(d.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return d.isTargetToShow(a.data.id)&&d.isArcType(a.data)?1:0}),g.select("."+k.chartArcsTitle).style("opacity",d.hasType("donut")||d.hasType("gauge")?1:0),d.hasType("gauge")&&(d.arcs.select("."+k.chartArcsBackground).attr("d",function(){var a={data:[{value:f.gauge_max}],startAngle:f.gauge_startingAngle,endAngle:-1*f.gauge_startingAngle};return d.getArc(a,!0,!0)}),d.arcs.select("."+k.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?f.gauge_units:""),d.arcs.select("."+k.chartArcsGaugeMin).attr("dx",-1*(d.innerRadius+(d.radius-d.innerRadius)/(f.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_min:""),d.arcs.select("."+k.chartArcsGaugeMax).attr("dx",d.innerRadius+(d.radius-d.innerRadius)/(f.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_max:""))},d.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",k.chartArcsBackground),a.append("text").attr("class",k.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",k.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",k.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},d.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},d.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",k.regions)},d.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+k.regions).selectAll("."+k.region).data(c.regions),b.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),b.mainRegion.attr("class",b.classRegion.bind(b)),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},d.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return l(a.opacity)?a.opacity:.1})]},d.regionX=function(a){var d,b=this,c=b.config,e="y"===a.axis?b.y:b.y2;return d="y"===a.axis||"y2"===a.axis?c.axis_rotated&&"start"in a?e(a.start):0:c.axis_rotated?0:"start"in a?b.x(b.isTimeSeries()?b.parseDate(a.start):a.start):0},d.regionY=function(a){var d,b=this,c=b.config,e="y"===a.axis?b.y:b.y2;return d="y"===a.axis||"y2"===a.axis?c.axis_rotated?0:"end"in a?e(a.end):0:c.axis_rotated&&"start"in a?b.x(b.isTimeSeries()?b.parseDate(a.start):a.start):0},d.regionWidth=function(a){var e,b=this,c=b.config,d=b.regionX(a),f="y"===a.axis?b.y:b.y2;return e="y"===a.axis||"y2"===a.axis?c.axis_rotated&&"end"in a?f(a.end):b.width:c.axis_rotated?b.width:"end"in a?b.x(b.isTimeSeries()?b.parseDate(a.end):a.end):b.width,e<d?0:e-d},d.regionHeight=function(a){var e,b=this,c=b.config,d=this.regionY(a),f="y"===a.axis?b.y:b.y2;return e="y"===a.axis||"y2"===a.axis?c.axis_rotated?b.height:"start"in a?f(a.start):b.height:c.axis_rotated&&"end"in a?b.x(b.isTimeSeries()?b.parseDate(a.end):a.end):b.height,e<d?0:e-d},d.isRegionOnX=function(a){return!a.axis||"x"===a.axis},d.drag=function(a){var f,g,h,i,j,l,m,n,b=this,c=b.config,d=b.main,e=b.d3;b.hasArcType()||c.data_selection_enabled&&(c.zoom_enabled&&!b.zoom.altDomain||c.data_selection_multiple&&(f=b.dragStart[0],g=b.dragStart[1],h=a[0],i=a[1],j=Math.min(f,h),l=Math.max(f,h),m=c.data_selection_grouped?b.margin.top:Math.min(g,i),n=c.data_selection_grouped?b.height:Math.max(g,i),d.select("."+k.dragarea).attr("x",j).attr("y",m).attr("width",l-j).attr("height",n-m),d.selectAll("."+k.shapes).selectAll("."+k.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var h,i,o,p,q,s,d=e.select(this),f=d.classed(k.SELECTED),g=d.classed(k.INCLUDED),r=!1;if(d.classed(k.circle))h=1*d.attr("cx"),i=1*d.attr("cy"),q=b.togglePoint,r=j<h&&h<l&&m<i&&i<n;else{if(!d.classed(k.bar))return;s=y(this),h=s.x,i=s.y,o=s.width,p=s.height,q=b.togglePath,r=!(l<h||h+o<j||n<i||i+p<m)}r^g&&(d.classed(k.INCLUDED,!g),d.classed(k.SELECTED,!f),q.call(b,!f,d,a,c))})))},d.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+k.chart).append("rect").attr("class",k.dragarea).style("opacity",.1),b.dragging=!0)},d.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+k.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+k.shape).classed(k.INCLUDED,!1),a.dragging=!1)},d.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+k.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+k.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(k.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},d.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select("."+k.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+k.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},d.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},d.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},d.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})},d.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},d.getToggle=function(a,b){var d,c=this;return"circle"===a.nodeName?d=c.isStepType(b)?function(){}:c.togglePoint:"path"===a.nodeName&&(d=c.togglePath),d},d.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(k.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+k.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+k.shape).each(function(a,b){var c=e.select(this);c.classed(k.SELECTED)&&i(!1,c.classed(k.SELECTED,!1),a,b)}),g.classed(k.SELECTED,!h),i(!h,g,b,c))},d.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+k.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},d.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",k.chart),c.select("."+k.chart).append("g").attr("class",k.chartBars),c.select("."+k.chart).append("g").attr("class",k.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",k.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",k.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},d.updateTargetsForSubchart=function(a){var e,f,g,h,b=this,c=b.context,d=b.config,i=b.classChartBar.bind(b),j=b.classBars.bind(b),l=b.classChartLine.bind(b),m=b.classLines.bind(b),n=b.classAreas.bind(b);d.subchart_show&&(h=c.select("."+k.chartBars).selectAll("."+k.chartBar).data(a).attr("class",i),g=h.enter().append("g").style("opacity",0).attr("class",i),g.append("g").attr("class",j),f=c.select("."+k.chartLines).selectAll("."+k.chartLine).data(a).attr("class",l),e=f.enter().append("g").style("opacity",0).attr("class",l),e.append("g").attr("class",m),e.append("g").attr("class",n),c.selectAll("."+k.brush+" rect").attr(d.axis_rotated?"width":"height",d.axis_rotated?b.width2:b.height2))},d.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+k.bars).selectAll("."+k.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},d.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},d.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+k.lines).selectAll("."+k.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},d.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)},d.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+k.areas).selectAll("."+k.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},d.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},d.redrawSubchart=function(a,b,c,d,e,f,g){var k,l,m,h=this,i=h.d3,j=h.config;h.context.style("visibility",j.subchart_show?"visible":"hidden"),j.subchart_show&&(i.event&&"zoom"===i.event.type&&h.brush.extent(h.x.orgDomain()).update(),a&&(h.brush.empty()||h.brush.extent(h.x.orgDomain()).update(),k=h.generateDrawArea(e,!0),l=h.generateDrawBar(f,!0),m=h.generateDrawLine(g,!0),h.updateBarForSubchart(c),h.updateLineForSubchart(c),h.updateAreaForSubchart(c),h.redrawBarForSubchart(l,c,c),h.redrawLineForSubchart(m,c,c),h.redrawAreaForSubchart(k,c,c)))},d.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},d.transformContext=function(a,b){var d,c=this;b&&b.axisSubX?d=b.axisSubX:(d=c.context.select("."+k.axisX),a&&(d=d.transition())),c.context.attr("transform",c.getTranslate("context")),d.attr("transform",c.getTranslate("subx"))},d.getDefaultExtent=function(){var a=this,b=a.config,c=m(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},d.initZoom=function(){var d,a=this,b=a.d3,c=a.config;a.zoom=b.behavior.zoom().on("zoomstart",function(){d=b.event.sourceEvent,a.zoom.altDomain=b.event.sourceEvent.altKey?a.x.orgDomain():null,c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("zoom",function(){a.redrawForZoom.call(a)}).on("zoomend",function(){var e=b.event.sourceEvent;e&&d.clientX===e.clientX&&d.clientY===e.clientY||(a.redrawEventRect(),a.updateZoom(),c.zoom_onzoomend.call(a.api,a.x.orgDomain()))}),a.zoom.scale=function(a){return c.axis_rotated?this.y(a):this.x(a)},a.zoom.orgScaleExtent=function(){var b=c.zoom_extent?c.zoom_extent:[1,10];return[b[0],Math.max(a.getMaxDataCount()/b[1],b[1])]},a.zoom.updateScaleExtent=function(){var b=s(a.x.orgDomain())/s(a.getZoomDomain()),c=this.orgScaleExtent();return this.scaleExtent([c[0]*b,c[1]*b]),this}},d.getZoomDomain=function(){var a=this,b=a.config,c=a.d3,d=c.min([a.orgXDomain[0],b.zoom_x_min]),e=c.max([a.orgXDomain[1],b.zoom_x_max]);return[d,e]},d.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+k.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+k.eventRect).call(b).on("dblclick.zoom",null)},d.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},d.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=u(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var c,b=a.id||a.data&&a.data.id||a;return d[b]instanceof Function?c=d[b](a):d[b]?c=d[b]:(g.indexOf(b)<0&&g.push(b),c=e[g.indexOf(b)%e.length],d[b]=c),f instanceof Function?f(c,a):c}},d.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return u(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},d.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},d.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},d.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},d.defaultValueFormat=function(a){return l(a)?+a:""},d.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},d.dataLabelFormat=function(a){var d,b=this,c=b.config.data_labels,e=function(a){return l(a)?+a:""};return d="function"==typeof c.format?c.format:"object"==typeof c.format?c.format[a]?c.format[a]===!0?e:c.format[a]:function(){return""}:e},d.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},d.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},d.getCaches=function(a){var c,b=[];for(c=0;c<a.length;c++)a[c]in this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};var k=d.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};d.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},d.classText=function(a){return this.generateClass(k.text,a.index)},d.classTexts=function(a){return this.generateClass(k.texts,a.id)},d.classShape=function(a){return this.generateClass(k.shape,a.index)},d.classShapes=function(a){return this.generateClass(k.shapes,a.id)},d.classLine=function(a){return this.classShape(a)+this.generateClass(k.line,a.id)},d.classLines=function(a){return this.classShapes(a)+this.generateClass(k.lines,a.id)},d.classCircle=function(a){return this.classShape(a)+this.generateClass(k.circle,a.index)},d.classCircles=function(a){return this.classShapes(a)+this.generateClass(k.circles,a.id)},d.classBar=function(a){return this.classShape(a)+this.generateClass(k.bar,a.index)},d.classBars=function(a){return this.classShapes(a)+this.generateClass(k.bars,a.id)},d.classArc=function(a){return this.classShape(a.data)+this.generateClass(k.arc,a.data.id)},d.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(k.arcs,a.data.id)},d.classArea=function(a){return this.classShape(a)+this.generateClass(k.area,a.id)},d.classAreas=function(a){return this.classShapes(a)+this.generateClass(k.areas,a.id)},d.classRegion=function(a,b){return this.generateClass(k.region,b)+" "+("class"in a?a.class:"")},d.classEvent=function(a){return this.generateClass(k.eventRect,a.index)},d.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+k.target+"-"+c),b.generateClass(k.target,a)+d},d.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},d.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?k.focused:"")},d.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?k.defocused:"")},d.classChartText=function(a){return k.chartText+this.classTarget(a.id)},d.classChartLine=function(a){return k.chartLine+this.classTarget(a.id)},d.classChartBar=function(a){return k.chartBar+this.classTarget(a.id)},d.classChartArc=function(a){return k.chartArc+this.classTarget(a.data.id)},d.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},d.selectorTarget=function(a,b){return(b||"")+"."+k.target+this.getTargetSelectorSuffix(a)},d.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},d.selectorLegend=function(a){return"."+k.legendItem+this.getTargetSelectorSuffix(a)},d.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var l=d.isValue=function(a){return a||0===a},m=d.isFunction=function(a){return"function"==typeof a},n=d.isString=function(a){return"string"==typeof a},o=d.isUndefined=function(a){return"undefined"==typeof a},p=d.isDefined=function(a){return"undefined"!=typeof a},q=d.ceil10=function(a){return 10*Math.ceil(a/10)},r=d.asHalfPixel=function(a){return Math.ceil(a)+.5},s=d.diffDomain=function(a){return a[1]-a[0]},t=d.isEmpty=function(a){return"undefined"==typeof a||null===a||n(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},u=d.notEmpty=function(a){return!d.isEmpty(a)},v=d.getOption=function(a,b,c){return p(a[b])?a[b]:c},w=d.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},x=d.sanitise=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},y=d.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};c.focus=function(a){var c,b=this.internal;a=b.mapToTargetIds(a),c=b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))),this.revert(),this.defocus(),c.classed(k.focused,!0).classed(k.defocused,!1),
b.hasArcType()&&b.expandArc(a),b.toggleFocusLegend(a,!0),b.focusedTargetIds=a,b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},c.defocus=function(a){var c,b=this.internal;a=b.mapToTargetIds(a),c=b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))),c.classed(k.focused,!1).classed(k.defocused,!0),b.hasArcType()&&b.unexpandArc(a),b.toggleFocusLegend(a,!1),b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),b.defocusedTargetIds=a},c.revert=function(a){var c,b=this.internal;a=b.mapToTargetIds(a),c=b.svg.selectAll(b.selectorTargets(a)),c.classed(k.focused,!1).classed(k.defocused,!1),b.hasArcType()&&b.unexpandArc(a),b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(k.legendItemFocused)}).classed(k.legendItemFocused,!1)),b.focusedTargetIds=[],b.defocusedTargetIds=[]},c.show=function(a,b){var d,c=this.internal;a=c.mapToTargetIds(a),b=b||{},c.removeHiddenTargetIds(a),d=c.svg.selectAll(c.selectorTargets(a)),d.transition().style("opacity",1,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",1)}),b.withLegend&&c.showLegend(a),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c.hide=function(a,b){var d,c=this.internal;a=c.mapToTargetIds(a),b=b||{},c.addHiddenTargetIds(a),d=c.svg.selectAll(c.selectorTargets(a)),d.transition().style("opacity",0,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",0)}),b.withLegend&&c.hideLegend(a),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},c.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},c.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},c.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},c.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},c.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},c.zoom.range=function(a){return arguments.length?(p(a.max)&&this.domain.max(a.max),void(p(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},c.load=function(a){var b=this.internal,d=b.config;return a.xs&&b.addXs(a.xs),"names"in a&&c.data.names.bind(this)(a.names),"classes"in a&&Object.keys(a.classes).forEach(function(b){d.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(d.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){d.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){d.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},c.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},c.flow=function(a){var c,d,g,h,i,j,n,o,b=this.internal,e=[],f=b.getMaxDataCount(),k=0,m=0;if(a.json)d=b.convertJsonToData(a.json,a.keys);else if(a.rows)d=b.convertRowsToData(a.rows);else{if(!a.columns)return;d=b.convertColumnsToData(a.columns)}c=b.convertDataToTargets(d,!0),b.data.targets.forEach(function(a){var f,g,d=!1;for(f=0;f<c.length;f++)if(a.id===c[f].id){for(d=!0,a.values[a.values.length-1]&&(m=a.values[a.values.length-1].index+1),k=c[f].values.length,g=0;g<k;g++)c[f].values[g].index=m+g,b.isTimeSeries()||(c[f].values[g].x=m+g);a.values=a.values.concat(c[f].values),c.splice(f,1);break}d||e.push(a.id)}),b.data.targets.forEach(function(a){var c,d;for(c=0;c<e.length;c++)if(a.id===e[c])for(m=a.values[a.values.length-1].index+1,d=0;d<k;d++)a.values.push({id:a.id,index:m+d,x:b.isTimeSeries()?b.getOtherTargetX(m+d):m+d,value:null})}),b.data.targets.length&&c.forEach(function(a){var c,d=[];for(c=b.data.targets[0].values[0].index;c<m;c++)d.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=m,b.isTimeSeries()||(a.x+=m)}),a.values=d.concat(a.values)}),b.data.targets=b.data.targets.concat(c),g=b.getMaxDataCount(),i=b.data.targets[0],j=i.values[0],p(a.to)?(k=0,o=b.isTimeSeries()?b.parseDate(a.to):a.to,i.values.forEach(function(a){a.x<o&&k++})):p(a.length)&&(k=a.length),f?1===f&&b.isTimeSeries()&&(n=(i.values[i.values.length-1].x-j.x)/2,h=[new Date(+j.x-n),new Date(+j.x+n)],b.updateXDomain(null,!0,!0,!1,h)):(n=b.isTimeSeries()?i.values.length>1?i.values[i.values.length-1].x-j.x:j.x-b.getXDomain(b.data.targets)[0]:1,h=[j.x-n,j.x],b.updateXDomain(null,!0,!0,!1,h)),b.updateTargets(b.data.targets),b.redraw({flow:{index:j.index,length:k,duration:l(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:f},withLegend:!0,withTransition:f>1,withTrimXDomain:!1,withUpdateXAxis:!0})},d.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var q,t,z,e=a.targets,f=a.flow,g=a.drawBar,h=a.drawLine,i=a.drawArea,j=a.cx,l=a.cy,m=a.xv,n=a.xForText,o=a.yForText,p=a.duration,r=1,u=f.index,v=f.length,w=b.getValueOnIndex(b.data.targets[0].values,u),x=b.getValueOnIndex(b.data.targets[0].values,u+v),y=b.x.domain(),A=f.duration||p,B=f.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,v)}),z=b.updateXDomain(e,!0,!0),b.updateXGrid&&b.updateXGrid(!0),f.orgDataCount?q=1===f.orgDataCount||(w&&w.x)===(x&&x.x)?b.x(y[0])-b.x(z[0]):b.isTimeSeries()?b.x(y[0])-b.x(z[0]):b.x(w.x)-b.x(x.x):1!==b.data.targets[0].values.length?q=b.x(y[0])-b.x(z[0]):b.isTimeSeries()?(w=b.getValueOnIndex(b.data.targets[0].values,0),x=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),q=b.x(w.x)-b.x(x.x)):q=s(z)/2,r=s(y)/s(z),t="translate("+q+",0) scale("+r+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",t)),C.add(I.transition().attr("transform",t)),C.add(J.transition().attr("transform",t)),C.add(K.transition().attr("transform",t)),C.add(G.transition().attr("transform",t)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",t)),C.add(D.transition().attr("transform",t)),C.add(E.transition().attr("transform",t))}).call(C,function(){var a,d=[],e=[],f=[];if(v){for(a=0;a<v;a++)d.push("."+k.shape+"-"+(u+a)),e.push("."+k.text+"-"+(u+a)),f.push("."+k.eventRect+"-"+(u+a));b.svg.selectAll("."+k.shapes).selectAll(d).remove(),b.svg.selectAll("."+k.texts).selectAll(e).remove(),b.svg.selectAll("."+k.eventRects).selectAll(f).remove(),b.svg.select("."+k.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:m).attr("x2",c.axis_rotated?b.width:m),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",m),H.attr("transform",null).attr("d",g),I.attr("transform",null).attr("d",h),J.attr("transform",null).attr("d",i),K.attr("transform",null).attr("cx",j).attr("cy",l),G.attr("transform",null).attr("x",n).attr("y",o).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},c.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+k.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+k.shape).filter(function(){return c.select(this).classed(k.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},c.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+k.shapes).selectAll("."+k.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,l=d.getToggle(this,g).bind(d),m=f.data_selection_grouped||!a||a.indexOf(j)>=0,n=!b||b.indexOf(h)>=0,o=i.classed(k.SELECTED);i.classed(k.line)||i.classed(k.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&l(!0,i.classed(k.SELECTED,!0),g,h):p(c)&&c&&o&&l(!1,i.classed(k.SELECTED,!1),g,h))})},c.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+k.shapes).selectAll("."+k.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),l=e.data_selection_grouped||!a||a.indexOf(i)>=0,m=!b||b.indexOf(g)>=0,n=h.classed(k.SELECTED);h.classed(k.line)||h.classed(k.area)||l&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(k.SELECTED,!1),f,g)})},c.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},d.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},c.groups=function(a){var b=this.internal,c=b.config;return o(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},c.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},c.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},c.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},c.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},c.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},c.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},c.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},c.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},c.regions.remove=function(a){var d,e,f,b=this.internal,c=b.config;return a=a||{},d=b.getOption(a,"duration",c.transition_duration),e=b.getOption(a,"classes",[k.region]),f=b.main.select("."+k.regions).selectAll(e.map(function(a){return"."+a})),(d?f.transition().duration(d):f).style("opacity",0).remove(),c.regions=c.regions.filter(function(a){var b=!1;return!a.class||(a.class.split(" ").forEach(function(a){e.indexOf(a)>=0&&(b=!0)}),!b)}),c.regions},c.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},c.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},c.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},c.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},c.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},c.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},c.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},c.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},c.color=function(a){var b=this.internal;return b.color(a)},c.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},c.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},c.axis=function(){},c.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},c.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(l(a.x)&&(c.axis_x_max=a.x),l(a.y)&&(c.axis_y_max=a.y),l(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},c.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(l(a.x)&&(c.axis_x_min=a.x),l(a.y)&&(c.axis_y_min=a.y),l(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},c.axis.range=function(a){return arguments.length?(p(a.max)&&this.axis.max(a.max),void(p(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},c.legend=function(){},c.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},c.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},c.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},c.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},c.destroy=function(){var b=this.internal;if(a.clearInterval(b.intervalForObserveInserted),void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),a.detachEvent)a.detachEvent("onresize",b.resizeFunction);else if(a.removeEventListener)a.removeEventListener("resize",b.resizeFunction);else{var c=a.onresize;c&&c.add&&c.remove&&c.remove(b.resizeFunction)}return b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},c.tooltip=function(){},c.tooltip.show=function(a){var c,d,b=this.internal;a.mouse&&(d=a.mouse),a.data?b.isMultipleX()?(d=[b.x(a.data.x),b.getYScale(a.data.id)(a.data.value)],c=null):c=l(a.data.index)?a.data.index:b.getIndexByX(a.data.x):"undefined"!=typeof a.x?c=b.getIndexByX(a.x):"undefined"!=typeof a.index&&(c=a.index),b.dispatchEvent("mouseover",c,d),b.dispatchEvent("mousemove",c,d),b.config.tooltip_onshow.call(b,a.data)},c.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var z;d.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},d.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(){"SVGPathSeg"in a||(a.SVGPathSeg=function(a,b,c){this.pathSegType=a,this.pathSegTypeAsLetter=b,this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},a.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},a.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a),this._x=b,this._y=c},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a),this._x=b,this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a),this._x=b,this._y=c},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a),this._x=b,this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,g){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a),this._x=b,this._y=c,this._x1=d,this._y1=e,this._x2=f,this._y2=g},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a),this._x=b,this._y=c,this._x1=d,this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcAbs=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegArcRel=function(a,b,c,d,e,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a),this._x=b,this._y=c,this._r1=d,this._r2=e,this._angle=f,this._largeArcFlag=g,this._sweepFlag=h},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a),this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",a),this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a),this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a),
this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a),this._x=b,this._y=c,this._x2=d,this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),a.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a),this._x=b,this._y=c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,g){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,g){return new SVGPathSegArcRel(void 0,a,b,c,d,e,f,g)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)}),"SVGPathSegList"in a||(a.SVGPathSegList=function(a){this._pathElement=a,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)}),b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(a){a._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){return this._checkPathSynchronizedToList(),this._list=[a],a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||a<0||a>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(a){return this._checkPathSynchronizedToList(),this._checkValidIndex(a),this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){return this._checkPathSynchronizedToList(),b>this.numberOfItems&&(b=this.numberOfItems),a._owningPathSegList&&(a=a.clone()),this._list.splice(b,0,a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.replaceItem=function(a,b){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._checkValidIndex(b),this._list[b]=a,a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList(),this._checkValidIndex(a);var b=this._list[a];return this._list.splice(a,1),this._writeListToPath(),b},SVGPathSegList.prototype.appendItem=function(a){return this._checkPathSynchronizedToList(),a._owningPathSegList&&(a=a.clone()),this._list.push(a),a._owningPathSegList=this,this._writeListToPath(),a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;return a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()}),b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return a<=" "&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)},d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},d.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},d.prototype.peekSegmentType=function(){var a=this._string[this._currentIndex];return this._pathSegTypeFromChar(a)},d.prototype._pathSegTypeFromChar=function(a){switch(a){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||a>="0"&&a<="9")&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN},d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL},d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=h)for(var i=this._currentIndex-1,j=1;i>=h;)b+=j*(this._string.charAt(i--)-"0"),j*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)d+=(this._string.charAt(this._currentIndex++)-"0")*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,a+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var k=b+d;if(k*=e,a&&(k*=Math.pow(10,f*a)),g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),k}},d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=!1,b=this._string.charAt(this._currentIndex++);if("0"==b)a=!1;else{if("1"!=b)return;a=!0}return this._skipOptionalSpacesOrDelimiter(),a}},d.prototype.parseSegment=function(){var a=this._string[this._currentIndex],c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if(c=this._nextCommandHelper(a,this._previousCommand),c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=c,c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(b,d.x,d.y,d.x1,d.y1,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var d={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(b,d.x,d.y,d.x2,d.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(b,d.x,d.y,d.x1,d.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var d={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(b,d.x,d.y,d.x1,d.y1,d.arcAngle,d.arcLarge,d.arcSweep);default:throw"Unknown path seg type."}};var e=new c,f=new d(a);if(!f.initialCommandIsMoveTo())return[];for(;f.hasMoreData();){var g=f.parseSegment();if(!g)return[];e.appendSegment(g)}return e.pathSegList})}(),"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=b:a.c3=b}(window);